{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plotly and Django</title>
    <link rel="stylesheet" type="text/css" href="{% static 'styles.css' %}">
    <script src="{% static 'end.js' %}"></script>
    
    <for-love amount="40" multicolor>
    </for-love> 

    <!-- Use cdn to use plotly -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <!-- Enabling bootstrap for layout design -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism.min.css" rel="stylesheet" />
 
</head>


 


<body>
    <div class="glitch-container">
      <div class="glitch-title" title="CLUSTERING">CLUSTERING</div>
      <br><br><br><br><br><br><br><br><br>
    </div>
</body>



    <div class="team">
        <span>Azadeh - Max - Théo </span>
    </div>
    
    <section class="TEST">
        <div class="top">ANALYSE</div>
        <div class="bottom" aria-hidden="true">ANALYSE</div>
    </section>


    <br><br><br>
    <div class="container">


    <div class="row">
        <div class="col-6">
            
   
    <h3 class="styled-heading">
        Distribution de  <span class="gradient-text"> l'âge des clients</span> 
    </h3>
              
            {% autoescape off %}
            {{ first_graph }}
            {% endautoescape %}
        </div>
        <div class="col-6">
            <h3 class="styled-heading">
                Distribution des <span class="gradient-text"> revenus </span>  

            </h3>
            
            {% autoescape off %}
            {{ income_html }}
            {% endautoescape %}
        </div>
    </div>
    <br><br>
    
    <div class="container">
        <div class="text-center">
            <h3 class="styled-heading">
                Distribution des<span class="gradient-text"> Niveau de diplôme et statut marital </span> 
            </h3>
            <div>
                {% autoescape off %}
                {{ fig2_html }}
                {% endautoescape %}
            </div>
        </div>
        
        <div class="text-center mt-5">
            <h3 class="styled-heading">
                <span class="gradient-text"> Heatmap </span> des correlations
            </h3>
            <div>
                {% autoescape off %}
                {{ heat }}
                {% endautoescape %}
            </div>
        </div>
    </div>
    
    
  
    
</div>

</body>
<br><br><br><br>

  <br><br><br><br>
<div class="col-12 d-flex justify-content-center align-items-center">
    <div id="boxplots-container">
        <h3 class="styled-heading">
            <span class="gradient-text"> Boxplot </span> des consommations

        </h3>
       
        {% autoescape off %}
        {{ boxplotsO }}
        {% endautoescape %}
    </div>
</div>

</div>

<br><br><br>
<br><br><br>
<h3 class="styled-heading" style="font-size: 35px;">
    Identification graphique <span class="gradient-text"> des clusters </span> 
</h3>
<br><br><br>

<div class="row">
    <div class="col-md-6">
        <h3 class="styled-heading" style="font-size: 20px;">
            Graphique 3D du Niveau de diplôme, de l'année de naissance <br> <span class="gradient-text"> et consommation de fruits</span> 
        </h3>
        {% autoescape off %}
        {{ green_3D_1 }}
        {% endautoescape %}
    </div>
    <div class="col-md-6">
        <h3 class="styled-heading" style="font-size: 20px;">
            Graphique 3D du Niveau de diplôme, de l'année de naissance <br> <span class="gradient-text"> et consommation de sucreries</span> 
        </h3>
        {% autoescape off %}
        {{ green_3D_2 }}
        {% endautoescape %}
    </div>
</div>
</div>





<section class="TEST">
    <div class="top">CLUSTERING</div>
    <div class="bottom" aria-hidden="true">CLUSTERING</div>
</section>


<br><br><br><br>
<h3 class="styled-heading">
    <span class="gradient-text"> ELBOW </span> CHART
</h3>
<div class="row justify-content-center">
    <div class="col-md-6"> <!-- Colonne pour le premier graphique -->
        <div class="elbow-chart">
            {% autoescape off %}
            {{ elbow }}
            {% endautoescape %}
        </div>
    </div>
    
</div>
<br><br><br><br>
<h3 class="styled-heading">
    SILHOUETTES <span class="gradient-text">  PLOTS </span> 
</h3>
<div class="row justify-content-center mt-4">
    
    <div class="col-md-6">
        <img src="{% static 'silhouette_plot_2.jpg' %}" class="img-fluid mx-auto d-block" alt="Image 1">
    </div>
    <div class="col-md-6"> 
        <img src="{% static 'silhouette_plot_3.jpg' %}" class="img-fluid mx-auto d-block" alt="Image 2">
    </div>
</div>
<div class="row justify-content-center mt-4">
    <div class="col-md-6"> 
        <img src="{% static 'silhouette_plot_4.jpg' %}" class="img-fluid mx-auto d-block"alt="Image 3">
    </div>
    <div class="col-md-6"> 
        <img src="{% static 'silhouette_plot_6.jpg' %}" class="img-fluid mx-auto d-block" alt="Image 4">
    </div>
</div>


<br><br><br><br><br><br><br><br>

<br><br><br><br><br><br><br><br>


<div class="row">
    <div class="col-md-6">
        <h3 class="styled-heading" style="font-size: 30px;">
            PCA <span class="gradient-text"> 2 Dimensions <br>3 CLUSTERS</span> 
        </h3>
        {% autoescape off %}
        {{ PCA2D }}
        {% endautoescape %}
        <div class="container">
            <div class="row justify-content-center">
               
                   

            </div>
        </div>
        
    </div>
    <div class="col-md-6">
        <h3 class="styled-heading" style="font-size: 30px;">
            PCA <span class="gradient-text"> 3 Dimensions<br> 4 CLUSTERS </span> 
        </h3>
        {% autoescape off %}
        {{ PCA3D }}
        {% endautoescape %}
       
    </div>
<br><br><br><br>

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                        {{ DataFrame_means|safe }}
                    </table>
                </div>
            </div>
        </div>
    </div>
    

</div>




<br><br><br><br><br><br><br><br><br>

    <div class="row">
    
        <div class="col-6">
         
    <h3 class="styled-heading">
        PLOT 3D <span class="gradient-text"> Clusters Kmeans <br> YearBirth,Income,Wines</span>  
       
    </h3>
                
            {% autoescape off %}
            {{ YIW }}
            {% endautoescape %}
        </div>
        <div class="col-6">
            <h3 class="styled-heading">
                PLOT 3D <span class="gradient-text"> Clusters Kmeans <br> Gold,Wines,Fish</span> 
                

            </h3>
            
            {% autoescape off %}
            {{ WGF }}
            {% endautoescape %}
        </div>
    <br><br><br><br>

<h3 class="styled-heading">
    <span class="gradient-text" style="font-size: 30px;"> RFM </span> 
</h3>


<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-6 d-flex justify-content-center"> <!-- Colonne pour le graphique -->
            {% autoescape off %}
            {{ figRFM }}
            {% endautoescape %}
        </div>
        <div class="col-md-6"> <!-- Colonne pour le code Python -->
            <br><br>
            <pre>
                <br>
                <code class="language-python">
                    Rlabel = range(4,0,-1)
                    Flabel = range(1,5)
                    Mlabel = range(1,5)

                    Rgrp = pd.qcut(df["Recency"], q=4, labels = Rlabel)
                    Fgrp = pd.qcut(df["Frequency"], q=4, labels = Flabel)
                    Mgrp = pd.qcut(df["MonetaryValue"], q=4, labels = Mlabel)

                    df["R"] = Rgrp.values
                    df["F"] = Fgrp.values
                    df["M"] = Mgrp.values

                    def RFMlevel(df):
                        if(df['Score']>9):
                            return "1Première"
                        elif (df["Score"]>9)and(df["Score"] >=7): return "2Champions"
                        elif (df["Score"]>7)and(df["Score"] >=6): return "3Loyal"
                        elif (df["Score"]>6)and(df["Score"] >=5): return "4Potential"
                        elif (df["Score"]>5)and(df["Score"] >=4): return "5Promising"
                        elif (df["Score"]>4)and(df["Score"] >=3): return "6Need attention"
                        else : return "7Require activation"

                    df["RFM_Level"] = df.apply(RFMlevel,axis=1)
                </code>
            </pre>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/autoloader/prism-autoloader.min.js"></script>   

        

<for-love amount="40" multicolor>

</for-love>




<style type="text/css">
    @keyframes example {
        0%   {color: #EEE;}
        25%  {color: #EC4899;}
        50%  {color: #8B5CF6;}
        100% {color: #EF4444;}
    }
    #container {
        background: #1F2937;
        padding: 10em;
    }
    h1 {
        color:#eee;
        animation-name: example;
        animation-duration: 4s;
        animation-iteration-count: infinite;text-align:center;
    }
</style>
<div id="container">
    <h1 style="font-size: 70px;"> MERCI </h1>
</div>

</body>
</html>







